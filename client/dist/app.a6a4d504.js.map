{"version":3,"sources":["src/core/Component.js","src/components/Items.js","src/app.js"],"names":["Component","$target","setup","setEvent","render","innerHTML","template","newState","$state","eventType","selector","callback","children","querySelectorAll","isTarget","target","includes","closest","addEventListener","event","Items","isFilter","items","filter","active","seq","contents","filteredItems","map","join","addEvent","key","Math","max","v","value","setState","Number","dataset","splice","findIndex","index","App","$app","document","querySelector"],"mappings":"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","file":"app.a6a4d504.js","sourceRoot":"..","sourcesContent":["export default class Component {\n  $target;\n  $state;\n\n  constructor($target) {\n    this.$target = $target;\n    this.setup();\n    this.setEvent();\n    this.render();\n  }\n\n  setup() {}\n\n  template() {\n    return '';\n  }\n\n  render() {\n    this.$target.innerHTML = this.template();\n  }\n\n  setEvent() {}\n\n  setState(newState) {\n    this.$state = { ...this.$state, ...newState };\n    this.render();\n  }\n\n  addEvent(eventType, selector, callback) {\n    const children = [...this.$target.querySelectorAll(selector)];\n    // selector에 명시한 것 보다 더 하위 요소가 선택되는 경우가 있을 땐\n    // closest를 이용하여 처리한다.\n    const isTarget = (target) =>\n      children.includes(target) || target.closest(selector);\n    this.$target.addEventListener(eventType, (event) => {\n      if (!isTarget(event.target)) return false;\n      callback(event);\n    });\n  }\n}\n","import Component from '../core/Component.js';\n\nexport default class Items extends Component {\n  get filteredItems() {\n    const { isFilter, items } = this.$state;\n    return items.filter(\n      ({ active }) =>\n        (isFilter === 1 && active) ||\n        (isFilter === 2 && !active) ||\n        isFilter === 0,\n    );\n  }\n\n  setup() {\n    this.$state = {\n      isFilter: 0,\n      items: [\n        {\n          seq: 1,\n          contents: 'item1',\n          active: false,\n        },\n        {\n          seq: 2,\n          contents: 'item2',\n          active: true,\n        },\n      ],\n    };\n  }\n\n  template() {\n    return `\n      <header>\n        <input type=\"text\" class=\"appender\" placeholder=\"아이템 내용 입력\" />\n      </header>\n      <main>\n        <ul>\n          ${this.filteredItems\n            .map(\n              ({ contents, active, seq }) => `\n            <li data-seq=\"${seq}\">\n              ${contents}\n              <button class=\"toggleBtn\" style=\"color: ${\n                active ? '#09F' : '#F09'\n              }\">\n                ${active ? '활성' : '비활성'}\n              </button>\n              <button class=\"deleteBtn\">삭제</button>\n            </li>\n          `,\n            )\n            .join('')}\n        </ul>\n      </main>\n      <footer>\n        <button class=\"filterBtn\" data-is-filter=\"0\">전체 보기</button>\n        <button class=\"filterBtn\" data-is-filter=\"1\">활성 보기</button>\n        <button class=\"filterBtn\" data-is-filter=\"2\">비활성 보기</button>\n      </footer>\n    `;\n  }\n\n  setEvent() {\n    this.addEvent('keyup', '.appender', ({ key, target }) => {\n      if (key !== 'Enter') return;\n      const { items } = this.$state;\n      const seq = Math.max(0, ...items.map((v) => v.seq)) + 1;\n      const contents = target.value;\n      const active = false;\n      this.setState({\n        items: [...items, { seq, contents, active }],\n      });\n    });\n\n    this.addEvent('click', '.deleteBtn', ({ target }) => {\n      const items = [...this.$state.items];\n      const seq = Number(target.closest('[data-seq]').dataset.seq);\n      items.splice(\n        items.findIndex((v) => v.seq === seq),\n        1,\n      );\n      this.setState({ items });\n    });\n\n    this.addEvent('click', '.toggleBtn', ({ target }) => {\n      const items = [...this.$state.items];\n      const seq = Number(target.closest('[data-seq]').dataset.seq);\n      const index = items.findIndex((v) => v.seq === seq);\n      items[index].active = !items[index].active;\n      this.setState({ items });\n    });\n\n    this.addEvent('click', '.filterBtn', ({ target }) => {\n      this.setState({ isFilter: Number(target.dataset.isFilter) });\n    });\n  }\n}\n","import Items from './components/Items.js';\n\nclass App {\n  constructor() {\n    const $app = document.querySelector('#app');\n    new Items($app);\n  }\n}\n\nnew App();\n"]}